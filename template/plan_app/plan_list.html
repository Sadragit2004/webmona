{% load humanize %}
{% load static %}

<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پلن‌های قیمت‌گذاری</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
                        'bounce-subtle': 'bounce-subtle 2s infinite',
                    },
                    keyframes: {
                        'pulse-glow': {
                            '0%, 100%': {
                                'box-shadow': '0 0 5px rgba(99, 102, 241, 0.5)',
                                'transform': 'scale(1)'
                            },
                            '50%': {
                                'box-shadow': '0 0 20px rgba(99, 102, 241, 0.8), 0 0 30px rgba(99, 102, 241, 0.6)',
                                'transform': 'scale(1.02)'
                            }
                        },
                        'bounce-subtle': {
                            '0%, 100%': {
                                'transform': 'translateY(0)'
                            },
                            '50%': {
                                'transform': 'translateY(-5px)'
                            }
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-900">
    <div class="relative isolate bg-gray-900 px-6 py-24 sm:py-32 lg:px-8">
        <!-- Background decoration -->
        <div aria-hidden="true" class="absolute inset-x-0 -top-3 -z-10 transform-gpu overflow-hidden px-36 blur-3xl">
            <div style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"
                 class="mx-auto aspect-1155/678 w-288.75 bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-20"></div>
        </div>

        <!-- Header section -->
        <div class="mx-auto max-w-4xl text-center">
            <h2 class="text-base/7 font-semibold text-indigo-400">تعرفه‌ها</h2>
        </div>

        <!-- Plans grid - 3 plans per row -->
        <div class="mx-auto mt-16 grid max-w-7xl grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
            {% for plan in plans %}
            <div class="relative rounded-3xl p-8 ring-1 ring-white/10 transition-all duration-300
                        {% if plan.isFavorit %}
                        bg-gradient-to-br from-gray-800 to-indigo-900/30 animate-pulse-glow
                        {% else %}
                        bg-white/2.5 hover:bg-white/5
                        {% endif %}">

                <!-- Favorite badge with animation -->
                {% if plan.isFavorit %}
                <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 animate-bounce-subtle">
                    <span class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg flex items-center gap-2">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                        پلن محبوب
                    </span>
                </div>

                <!-- Shiny corner effect for favorite plan -->
                <div class="absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-indigo-400 rounded-tl-lg"></div>
                <div class="absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-indigo-400 rounded-tr-lg"></div>
                <div class="absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-indigo-400 rounded-bl-lg"></div>
                <div class="absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-indigo-400 rounded-br-lg"></div>
                {% endif %}

                <h3 id="tier-{{ plan.slug }}" class="text-base/7 font-semibold text-indigo-400 text-center">{{ plan.name }}</h3>

                <!-- Price section -->
                <div class="mt-4 flex items-baseline justify-center gap-x-2">
                    {% if plan.price %}
                    <span class="text-5xl font-semibold tracking-tight text-white">{{ plan.price|intcomma }}</span>
                    <span class="text-base text-gray-400">تومان</span>
                    {% else %}
                    <span class="text-3xl font-semibold tracking-tight text-white">رایگان</span>
                    {% endif %}
                </div>

                <!-- Plan description -->
                {% if plan.description %}
                <p class="mt-6 text-base/7 text-gray-300 text-center">{{ plan.description }}</p>
                {% endif %}

                <!-- Features list -->
                <ul role="list" class="mt-8 space-y-3 text-sm/6 text-gray-300">
                    {% for feature in plan.features.all %}
                    <li class="flex gap-x-3 {% if not feature.isAvailable %}opacity-50{% endif %}">
                        {% if feature.isAvailable %}
                        <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="h-6 w-5 flex-none text-indigo-400">
                            <path d="M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z" clip-rule="evenodd" fill-rule="evenodd" />
                        </svg>
                        {% else %}
                        <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="h-6 w-5 flex-none text-gray-500">
                            <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                        </svg>
                        {% endif %}
                        {{ feature.title }}
                    </li>
                    {% endfor %}
                </ul>

                <!-- CTA button - بدون هیچ انیمیشن اضافه -->
                <a href="{% url 'plan:purchase_plan' plan.slug %}" aria-describedby="tier-{{ plan.slug }}"
                   class="mt-8 block rounded-md px-3.5 py-2.5 text-center text-sm font-semibold text-white
                          transition-colors duration-200
                          {% if plan.isFavorit %}
                          bg-indigo-500 hover:bg-indigo-400
                          {% else %}
                          bg-white/10 hover:bg-white/20
                          {% endif %}
                          focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/75">
                    {% if plan.price %}خرید پلن{% else %}شروع رایگان{% endif %}
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>